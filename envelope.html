<!DOCTYPE HTML>
<html lang="en">

  <head>
      <meta charset="UTF-8">
      <meta name="robots" content="index,follow,archive">
      <meta name="keywords" content="NIL">
      <link rel="stylesheet" type="text/css" href="style.css"/>
      <title>Envelopes</title>
      <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
      <link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'/>
      <link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'/>
  </head>
  
<body lang="en-US">
  <a id="top"></a>
  <a href=index.html class="link">Home</a> &nbsp;<a href=counter.html class="navigation">Previous: counter </a> &nbsp;<a href=shift-register.html class="navigation">Next: shift-register </a> &nbsp;<a href=contents.html class="navigation">Contents </a> &nbsp;
  <hr style='height:4px;border-width:0;color:green;background-color:gray'/>
  <img class="center" src="images/envelope.png" alt="envelope"/>
  <h1 class="banner">Envelopes</h1>
  <ul class='quick-jump'>
    <li>Quick Jump:</li>
      <li><a href='#asr-envelope'>asr-envelope</a></li>
      <li><a href='#curves'>sawtooth, triangle & pulse curves</a></li>
  </ul>
  <hr style='height:4px;border-width:0;color:green;background-color:gray'/>
  <a id="asr-envelope"></a>
  
  <!-- (ASR-ENVELOPE a b &key attack decay sustain loop hook monitor action) -->
  <!--  -->
  <!--  -->
  <b class="definition">(ASR-ENVELOPE a b &key attack decay sustain loop hook monitor action)</b><br>
  <p class="summery">Returns generator that produces attack-sustain-release envelope.</p>
  <pre class="description">
    
    a        - number, initial value
    b        - number, peak value  b &ne; a
    :attack  - attack stage increment, default 1
    :decay   - decay stage decrement, default 1
    :sustain - Integer, number of sustain steps, default 4
    :loop    - Boolean, if true, automatically reset after final decay value,
               default nil
    :hook    - Function, as in general generator hook, default (lambda (n) n)
    :monitor - Predicate function called within NEXT-1 on the current value.  
               If monitor returns non-nil the action function is executed.
               monitor/action are only available during the attack and decay stages.
               Default (lambda (envelope value) nil) &rarr; Boole
    
               The envelope object is passed to the monitor so that the current 
               state may be examined.  The method (envelope-state envelope) 
               returns one of three values  :ATTACK :SUSTAIN or :DECAY
    
    :action - Function called within next-1 whenever monitor is non-nil
              Default (lambda (envelope value) value) &rarr; next-value
    
    
    Examples:
    
    (param foo (asr-envelope 0 10))
    (next foo 30) &rarr; (0 1 2 3 4 5 6 7 8 9 10 10 10 10 9 8 7 6 5 4 3 2 1 0 0 0 0 0 0 0) 
    
    
    (param foo2 (asr-envelope 0 10 :attack 2 :decay 3 :sustain 2 :loop nil))
    (next foo2 30) &rarr; (0 2 4 6 8 10 10 7 4 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)
  </pre>
  <a id="curves"></a>
  
  <!-- (SAWTOOTH amp1 amp2 &key cycles steps phase) -->
  <!--  -->
  <!--  -->
  <b class="definition">(SAWTOOTH amp1 amp2 &key cycles steps phase)</b><br>
  
  <!-- (TRIANGLE amp1 amp2 &key cycles steps phase) -->
  <!--  -->
  <!--  -->
  <b class="definition">(TRIANGLE amp1 amp2 &key cycles steps phase)</b><br>
  
  <!-- (PULSE amp1 amp2 &key cycles steps width phase) -->
  <!--  -->
  <!--  -->
  <b class="definition">(PULSE amp1 amp2 &key cycles steps width phase)</b><br>
  <pre class="description">
    
    Each of these functions returns a numeric list with appropriate contour.  
    Note that there may be some distortion in the curves, specifically the common 
    difference may not be uniform and certain values may be repeated.
    
    amp1    - Initial amplitude
    amp2    - Peak amplitude
    :cycles - Number of wave cycles, default 1.
    :steps  - Number of points, defaults to difference between amp1 and amp2.
    :phase  - Phase shift in degrees, default 0.
    :width  - (Pulse only) pulse width percent 0 &le; width &le; 100, default 50.
  </pre>
  <hr style='height:4px;border-width:0;color:green;background-color:gray'/>
  <a href=index.html class="link">Home</a> &nbsp;<a href=counter.html class="navigation">Previous: counter </a> &nbsp;<a href=shift-register.html class="navigation">Next: shift-register </a> &nbsp;<a href=#top class="navigation">Top </a> &nbsp;<a href=contents.html class="navigation">Contents </a> &nbsp;
  
</body>
</html>